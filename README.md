# TRADE - מערכת מסחר אלגוריתמי בשפת Go

מערכת מסחר אלגוריתמית פשוטה ומונחית עצמים המיועדת לניתוח נתוני שוק בזמן אמת וביצוע מסחר אוטומטי.

## מבנה הפרויקט

המערכת בנויה ממספר רכיבים עיקריים:

1. **מנהל ראשי (Manager)** - מתאם בין כל הרכיבים ומנהל את זרימת המידע והפעולות במערכת.
2. **נתוני שוק (MarketData)** - אחראי על קבלת נתוני שוק בזמן אמת או מקבצים היסטוריים.
3. **אנלייזר (Analyzer)** - מחשב מדדי שוק ומנתח את הנתונים.
4. **אסטרטגיה (Strategy)** - מייצר אותות מסחר על בסיס המדדים והניתוח.
5. **לוגר (Logger)** - מנהל רישום לוגים ודיווח סטטוס.

```
TRADE/
├── cmd/
│   └── main.go           # נקודת כניסה ראשית
├── pkg/
│   ├── analyzer/
│   │   └── analyzer.go   # ניתוח נתוני שוק
│   ├── logger/
│   │   └── logger.go     # מערכת לוגים ודיווח
│   ├── manager/
│   │   └── manager.go    # מנהל ראשי
│   ├── market/
│   │   └── market_data.go # נתוני שוק
│   ├── strategy/
│   │   └── strategy.go   # אסטרטגיית מסחר
│   └── types/
│       └── types.go      # הגדרות טיפוסי נתונים
├── data/                 # תיקייה לנתונים היסטוריים
│   └── sample_btcusdt_data.csv # קובץ נתונים לדוגמה
├── logs/                 # תיקייה ללוגים
├── go.mod                # הגדרת המודול ותלויות
├── README.md             # תיעוד הפרויקט
└── run.sh                # סקריפט הרצה
```

## טיפוסי נתונים

המערכת משתמשת במבנים (structs) מוגדרים היטב להעברת נתונים בין הרכיבים השונים:

1. **TickData** - מייצג נתוני עסקה בודדת בשוק.
2. **MarketMetrics** - מכיל את כל מדדי השוק המחושבים.
3. **Signal** - מייצג אות מסחר (קנייה או מכירה).
4. **TradeData** - מייצג נתוני עסקה פעילה.
5. **MarketState** - מייצג את מצב השוק הנוכחי.
6. **PerformanceMetrics** - מייצג מדדי ביצוע של המסחר.

## מדדי שוק

המערכת מחשבת מספר מדדי שוק מרכזיים:

1. **תנודתיות (Realized Volatility)** - מודד את רמת התנודתיות בשוק.
2. **טווח ממוצע אמיתי (ATR)** - מודד את הטווח הממוצע של תנועות המחיר.
3. **חוזק יחסי (Relative Strength)** - מודד את היחס בין עליות לירידות מחיר.
4. **חוסר איזון בהזמנות (Order Imbalance)** - מודד את היחס בין קניות למכירות.
5. **עוצמת מגמה (Trend Strength)** - מודד את עוצמת המגמה הנוכחית.
6. **יחס יעילות שוק (Market Efficiency Ratio)** - מודד את יעילות תנועת המחיר.

## אסטרטגיית מסחר

האסטרטגיה מבוססת על שילוב של מדדי שוק שונים:

### תנאי כניסה (קנייה)
- תנודתיות בטווח מוגדר (לא גבוהה מדי ולא נמוכה מדי)
- חוזק יחסי בטווח מוגדר
- עוצמת מגמה חיובית וגבוהה מהממוצע
- חוסר איזון בהזמנות לטובת קניות
- יחס יעילות שוק גבוה

### תנאי יציאה (מכירה)
- הפעלת stop loss
- הגעה ליעד רווח
- שינוי מגמה משמעותי
- יציאה מבוססת זמן (אם העסקה פתוחה יותר מדי זמן)
- Trailing stop כאשר הרווח מגיע לסף מסוים

## הפעלת המערכת

### התקנת תלויות
```bash
cd TRADE
go mod download
```

### הרצה במצב מסחר חי
```bash
./run.sh --live
```

### הרצה במצב בדיקה אחורה (Backtest)
```bash
./run.sh --backtest
```

## יתרונות הגישה המונחית עצמים

1. **טיפוסים מוגדרים היטב** - שימוש במבנים (structs) במקום מפות (maps) מספק בטיחות טיפוסים ומונע שגיאות בזמן ריצה.
2. **קוד קריא יותר** - הגדרות מבנים ברורות מקלות על הבנת הקוד ותחזוקתו.
3. **יעילות** - העברת אובייקטים שלמים במקום מפות מפחיתה את הצורך בהמרות ובדיקות טיפוסים.
4. **הרחבה קלה** - קל יותר להוסיף שדות חדשים למבנים קיימים מבלי לשבור קוד קיים.
5. **תיעוד עצמי** - מבנה הנתונים מתועד בקוד עצמו, מה שמקל על הבנת המערכת.

## הערות מימוש

1. המערכת מיישמת גישה מונחית עצמים בשפת Go באמצעות מבנים (structs) ושיטות (methods).
2. כל רכיב מוגדר היטב עם אחריות ברורה, מה שמאפשר תחזוקה והרחבה קלות.
3. המערכת משתמשת ב-goroutines לטיפול במשימות מקביליות כמו קבלת נתונים ודיווח סטטוס.
4. מנגנוני נעילה (mutexes) מבטיחים גישה בטוחה למשאבים משותפים במצב ריבוי חוטים.
5. המערכת מנהלת לוגים מפורטים לצורך ניטור וניפוי באגים.


## אובייקטים 
TickData - נתוני עסקה בודדת
MarketMetrics - מדדי שוק
Signal - אות מסחר
TradeData - נתוני עסקה פעילה
MarketState - מצב השוק
PerformanceMetrics - מדדי ביצוע

## הפעלת המערכת
התקנת תלויות:

cd TRADE
go mod download
הרצה במצב מסחר חי:

./run.sh --live
הרצה במצב בדיקה אחורה:

./run.sh --backtest
המערכת שומרת על אותה פונקציונליות כמו הגרסה הקודמת, אבל עם קוד נקי יותר ויותר מונחה עצמים, בדיוק כפי שביקשת.